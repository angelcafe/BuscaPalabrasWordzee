function buscar(){if(!verificarCamposRellenos())return void alert("Debe rellenar todos los campos");const e=new FormData(document.getElementById("principal")),t=document.getElementById("cargando");t.classList.remove("d-none"),fetch("./back/buscar.php",{method:"POST",body:e}).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{mostrarPalabrasEncontradas("idPalabrasEncontradas","palenc noselect",e.encontradas),mostrarPalabrasEncontradas("idPalabrasGanadoras","noselect",e.sugeridas),t.classList.add("d-none");const n=document.querySelectorAll("td.palenc");n.forEach(function(e){e.addEventListener("click",function(){const t=e.textContent.split(" ")[0];if(t.length>0){const e=document.querySelectorAll("#letras>input");e.forEach(function(e,n){e.value=t[n]||""});const n=document.querySelector('#letras>input[value=""]');n&&n.focus(),document.getElementById("letras").scrollIntoView()}})})}).catch(e=>{console.error("Error:",e)})}function cambiarFoco(e){if("insertText"===e.inputType){const t=/^[a-jl-vx-zA-JL-VX-ZñÑ]$/;t.test(e.target.value)?e.target.nextElementSibling&&e.target.nextElementSibling.focus():e.target.value=""}else"deleteContentBackward"===e.inputType&&e.target.previousElementSibling&&e.target.previousElementSibling.focus()}function cambiarTema(e){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-bs-theme",t)}function cambiarValorBotones(e){const t={I:"rosa",DL:"bg-success",TL:"info"},n={I:"DL",DL:"TL",TL:""},a=e.currentTarget,o=a.value||"I";a.classList.remove("rosa","bg-success","info"),a.value=n[o],a.classList.add(t[o])}function mostrarPalabrasEncontradas(e,t,n){const a=[[],[],[],[],[]];for(const[e,o]of Object.entries(n)){const n=e.length-3;a[n].push(`<td class="${t}">${e} - ${o}</td>`)}const o=Math.max(...a.map(e=>e.length)),r=Array.from({length:o},(e,t)=>"<tr>"+a.map(e=>e[t]||"<td></td>").join("")+"</tr>"),c=document.getElementById(e);c.innerHTML=r.join("")}function restablecer(){window.location.href=window.location.href}function verificarCamposRellenos(){const e=document.querySelectorAll('input[name="letrasDisponibles[]"]');for(let t of e)if(""===t.value.trim())return!1;return null!==document.querySelector('input[name="ronda"]:checked')}window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.setAttribute("data-bs-theme","dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",cambiarTema),document.querySelectorAll("input[readonly]").forEach(e=>e.addEventListener("click",cambiarValorBotones)),document.querySelectorAll("#letras input").forEach(e=>e.addEventListener("input",cambiarFoco));